{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="grid grid-cols-2 md:grid-cols-5 gap-4 px-4 md:px-0"></div>
    <select id="sort-by-dropdown">
        <option value="reviews">Sort by Number of Reviews</option>
        <option value="rating">Sort by Rating</option>
    </select>
</div>
<div id="review-container" class="grid grid-cols-2 md:grid-cols-5 gap-4 px-4 md:px-0">
    <!-- Will be filled with partial html -->
</div>

<script>
    $(document).ready(function() {
        // Function to fetch and render reviews based on sorting criteria
        function fetchReviews(sortBy) {
            $.ajax({
                url: "{% url 'reviews:get_reviews_template' %}",
                method: "GET",
                data: {sort_by: sortBy},
                dataType: 'json',
                success: function(response) {
                    $("#review-container").html(response.html_content);
                }
            });
        }

        // Event listener for dropdown change
        $("#sort-by-dropdown").change(function() {
            var selectedSortBy = $(this).val();
            fetchReviews(selectedSortBy);
        });

        fetchReviews("reviews");
    });
</script>

{% endblock content %}
